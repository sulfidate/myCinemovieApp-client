<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: RegistrationView/registration-view.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: RegistrationView/registration-view.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState } from 'react'
import PropTypes from 'prop-types'
import axios from 'axios'
import {
  Form,
  Button,
  Container,
  Row,
  Col,
  Card,
  CardGroup,
  Navbar,
} from 'react-bootstrap'
import './registration-view.scss'
import { Redirect, Link } from 'react-router-dom'

/**
 * RegistrationView function
 * @Component RegistrationView function
 * @param {string} props.username - username
 * @param {string} props.password - password
 * @param {string} props.btnDisabled - btnDisabled
 * @param {string} props.usernameErr - usernameErr
 * @param {string} props.passwordErr - passwordErr
 * @param {string} props.setUsername - setUsername
 * @param {string} props.setPassword - setPassword
 * @param {string} props.setBtnDisabled - setBtnDisabled
 * @param {string} props.setUsernameErr - setUsernameErr
 * @param {string} props.setPasswordErr - setPasswordErr
 */
export default function RegistrationView(props) {
  const [username, setUsername] = useState('')
  const [password, setPassword] = useState('')
  const [email, setEmail] = useState('')
  const [birthday, setBirthday] = useState('')

  const [btnDisabled, setBtnDisabled] = useState(true)
  const [usernameErr, setUsernameErr] = useState('')
  const [passwordErr, setPasswordErr] = useState('')
  const [emailErr, setEmailErr] = useState('')

  const validateUsername = (e) => {
    if (!username) {
      setBtnDisabled(true)
      setUsernameErr('Username Required')
    } else if (username.length === 0 || username.length &lt; 7) {
      setUsernameErr('Username must be at least 8 characters long')
      setBtnDisabled(true)
    } else {
      setUsernameErr(null)
    }
    setUsername(e.target.value)
  }

  const validatePassword = (e) => {
    if (!password) {
      setBtnDisabled(true)
      setPasswordErr('Password Required')
    } else if (password.length &lt; 5) {
      setPasswordErr('Password must be at least 6 characters long')
      setBtnDisabled(true)
    } else {
      setPasswordErr(null)
    }
    setPassword(e.target.value)
  }

  const validateEmail = (e) => {
    if (!email) {
      setBtnDisabled(true)
      setEmailErr('Email Required')
    } else if (email.length &lt;= 5 || email.indexOf('@') === -1) {
      setEmailErr(
        `Email seems not to be in valid format - missing @ or . character (xxx@xxx.xxx)`
      )
      setBtnDisabled(true)
    } else {
      setEmailErr(null)
      setBtnDisabled(false)
    }
    setEmail(e.target.value)
  }

  const validate = () => {
    let isReq = true
    if (!username) {
      setUsernameErr('Username Required')
      isReq = false
    } else if (username.length &lt; 8) {
      setUsernameErr('Username must be at least 8 characters long')
      isReq = false
    }
    if (!password) {
      setPasswordErr('Password Required')
      isReq = false
    } else if (password.length &lt; 6) {
      setPasswordErr('Password must be at least 6 characters long')
      isReq = false
    }
    if (!email) {
      setEmailErr('Email Required')
      isReq = false
    } else if (email.indexOf('@') === -1 &amp;&amp; email.indexOf('.') === -1) {
      setEmailErr(
        'Email seems not to be in valid format - missing @ or . character (xxx@xxx.xxx)'
      )
      isReq = false
    }
    return isReq
  }

  /**
   * function to handle submit registration form
   * @event handleSubmit - registration form
   * @param {*} e
   * @returns {boolean}
   */
  const handleSubmit = (e) => {
    e.preventDefault()
    const isReq = validate()
    if (isReq) {
      axios
        .post('https://mycinemoviedatabase.herokuapp.com/users', {
          Username: username,
          Password: password,
          Email: email,
          Birthday: birthday,
        })
        .then((response) => {
          const data = response.data
          alert('Registration successful, please login!')
          window.open('/', '_self')
        })
        .catch((response) => {
          console.error(response)
          alert('unable to register - fill information in right format!')
        })
    }
  }

  return (
    &lt;Container>
      &lt;Container>
        &lt;Navbar className='header-view' variant='dark' bg='info' fixed='top'>
          &lt;Container>
            &lt;Navbar.Brand>myCineMovieApp&lt;/Navbar.Brand>
          &lt;/Container>

          &lt;Navbar.Text>
            &lt;Link to={'/'}>
              &lt;Button variant='light link' style={{ color: '#17A2B8' }}>
                Login
              &lt;/Button>
            &lt;/Link>
          &lt;/Navbar.Text>
        &lt;/Navbar>
      &lt;/Container>

      &lt;Row
        className='registration-view justify-content-center'
        style={{ margin: '7rem 1rem 7rem 1rem' }}
      >
        &lt;Col>&lt;/Col>
        &lt;Col xs={11} sm={11} md={8} lg={6} xl={6} xxl={6}>
          &lt;CardGroup>
            &lt;Card bg='light' key='' text='info' className='mb-2' border='info'>
              &lt;Card.Header as='h3'>Registration Form&lt;/Card.Header>
              &lt;Card.Body>
                &lt;Form>
                  &lt;Form.Group className='mb-3' controlId='formRegisterUsername'>
                    &lt;Form.Label className='form-label colorInfo'>
                      Username
                    &lt;/Form.Label>
                    &lt;Form.Control
                      style={{ fontSize: 'small' }}
                      type='text'
                      placeholder='Please register with username - at least 8 Chars'
                      value={username}
                      onBlur={validateUsername}
                      onChange={validateUsername}
                      required
                      minLength={8}
                    />
                    &lt;Form.Text className='text-muted'>
                      {usernameErr &amp;&amp; (
                        &lt;p style={{ color: 'red' }}>{usernameErr}&lt;/p>
                      )}
                    &lt;/Form.Text>
                  &lt;/Form.Group>

                  &lt;Form.Group className='mb-3' controlId='formRegisterPassword'>
                    &lt;Form.Label className='form-label colorInfo'>
                      Password
                    &lt;/Form.Label>
                    &lt;Form.Control
                      style={{ fontSize: 'small' }}
                      type='password'
                      placeholder='Choose password - at least 6 Chars'
                      value={password}
                      onBlur={validatePassword}
                      onChange={validatePassword}
                      required
                      minLength={6}
                    />
                    &lt;Form.Text className='text-muted'>
                      {passwordErr &amp;&amp; (
                        &lt;p style={{ color: 'red' }}>{passwordErr}&lt;/p>
                      )}
                    &lt;/Form.Text>
                  &lt;/Form.Group>

                  &lt;Form.Group className='mb-3' controlId='formRegisterEmail'>
                    &lt;Form.Label className='form-label colorInfo'>
                      Email address
                    &lt;/Form.Label>
                    &lt;Form.Control
                      style={{ fontSize: 'small' }}
                      type='email'
                      placeholder='Enter your email - valid format: xxx@xxx.xxx'
                      value={email}
                      onBlur={validateEmail}
                      onChange={validateEmail}
                      required
                    />
                    &lt;Form.Text className='text-muted'>
                      {emailErr &amp;&amp; &lt;p style={{ color: 'red' }}>{emailErr}&lt;/p>}
                    &lt;/Form.Text>
                  &lt;/Form.Group>

                  &lt;Form.Group className='mb-3' controlId='formRegisterBirthday'>
                    &lt;Form.Label className='form-label colorInfo'>
                      Birthday
                    &lt;/Form.Label>
                    &lt;Form.Control
                      type='date'
                      placeholder='Enter birthday'
                      value={birthday}
                      onChange={(e) => setBirthday(e.target.value)}
                    />
                  &lt;/Form.Group>
                &lt;/Form>
                &lt;Button
                  variant='info'
                  type='submit'
                  disabled={btnDisabled}
                  onClick={handleSubmit}
                >
                  Register
                &lt;/Button>
              &lt;/Card.Body>
            &lt;/Card>
          &lt;/CardGroup>
        &lt;/Col>
        &lt;Col>&lt;/Col>
      &lt;/Row>
    &lt;/Container>
  )
}

/**
 * PropTypes
 * @prop {string} username - username
 * @prop {string} password - password
 * @prop {string} email - email
 * @prop {string} birthday - birthday
 */
// PropTypes
RegistrationView.propTypes = {
  users: PropTypes.shape({
    Username: PropTypes.string.isRequired,
    Password: PropTypes.string.isRequired,
    Email: PropTypes.string.isRequired,
    Birthday: PropTypes.instanceOf(Date),
  }),
  onRegister: PropTypes.func,
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module.exports.html">exports</a></li></ul><h3>Events</h3><ul><li><a href="global.html#event:handleSubmit">handleSubmit</a></li><li><a href="global.html#event:handleSubmit-registrationform">handleSubmit - registration form</a></li><li><a href="global.html#event:%257BaddFavMovie%257D">{addFavMovie}</a></li><li><a href="global.html#event:%257BcheckIfMovieIsInFavorites%257D">{checkIfMovieIsInFavorites}</a></li><li><a href="global.html#event:%257BdeleteUser%257D">{deleteUser}</a></li><li><a href="global.html#event:%257BeditUserData%257D">{editUserData}</a></li><li><a href="global.html#event:%257BremoveFavMovie%257D">{removeFavMovie}</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addFavMovie">addFavMovie</a></li><li><a href="global.html#componentDidMount">componentDidMount</a></li><li><a href="global.html#getMovies">getMovies</a></li><li><a href="global.html#handleSubmit">handleSubmit</a></li><li><a href="global.html#handleSubmit-loginformsubmitpassword">handleSubmit - login form submit password</a></li><li><a href="global.html#handleSubmit-loginformsubmitusername">handleSubmit - login form submit username</a></li><li><a href="global.html#onLoggedIn">onLoggedIn</a></li><li><a href="global.html#onLoggedOut">onLoggedOut</a></li><li><a href="global.html#setBirthday">setBirthday</a></li><li><a href="global.html#setEmail">setEmail</a></li><li><a href="global.html#setPassword">setPassword</a></li><li><a href="global.html#setUsername">setUsername</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Tue Jun 07 2022 21:29:13 GMT+0200 (Mitteleuropäische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
